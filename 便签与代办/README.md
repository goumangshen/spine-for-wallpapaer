# Config.json 编辑器

一个用于编辑 Spine Wallpaper Engine 配置文件的图形化工具。

## 功能特性

1. **目录管理**
   - 支持选择或输入包含 `config.json` 的目录
   - 自动记忆最近使用的目录（最多10个）
   - 自动验证目录中是否存在 `config.json` 文件

2. **闹钟设置界面**
   - 管理基于时间的特殊特效触发（`triggerAtSecondOfDay`）
   - 只编辑 `specialEffectLibrary` 中 `type: 6` 的特效
   - 支持设置闹钟时间（HH:MM格式）
   - 支持设置闹钟名称（对应特效的 `text` 字段）
   - 支持选择音乐文件（列出目录下所有 mp3 文件）
   - 支持音乐试听功能
   - 支持设置音乐循环播放（`loop` 字段）
   - 支持启用/禁用闹钟（禁用时 `triggerAtSecondOfDay` 设置为 100000 + 原始时间）

3. **便签管理界面**
   - 管理便签列表（`notes` 配置）
   - 支持添加、编辑、删除便签
   - 支持设置便签内容（`text` 字段）
   - 支持设置便签显示状态（`visible` 字段）

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

1. 运行主程序：
```bash
python main.py
```

2. 在主界面中：
   - 输入或选择包含 `config.json` 的目录路径
   - 点击"验证目录"或从历史记录中选择
   - 验证成功后，可以点击"闹钟设置"或"便签管理"按钮

3. 在闹钟设置界面：
   - 点击"添加闹钟"创建新闹钟
   - 双击列表中的闹钟或选中后点击"编辑闹钟"进行编辑
   - 选择闹钟后点击"删除闹钟"可以删除
   - 编辑完成后点击"保存"保存配置

4. 在便签管理界面：
   - 点击"添加便签"创建新便签
   - 双击列表中的便签或选中后点击"编辑便签"进行编辑
   - 选择便签后点击"删除便签"可以删除
   - 编辑完成后点击"保存"保存配置

## 文件结构

```
.
├── main.py                 # 主程序入口
├── config_manager.py       # 配置管理器（JSON读写、目录记忆）
├── alarm_interface.py      # 闹钟设置界面
├── note_interface.py       # 便签管理界面
├── utils.py                # 工具函数（音频播放、文件查找等）
├── requirements.txt        # Python依赖
└── README.md              # 说明文档
```

## 注意事项

1. 程序会自动保存目录历史到 `config_history.json` 文件
2. 修改配置后需要点击"保存"按钮才会写入文件
3. 闹钟设置只编辑 `type: 6` 的特殊特效
4. 闹钟设置只编辑带有 `triggerAtSecondOfDay` 的触发配置
5. 禁用闹钟时，时间会被设置为 100000 + 原始秒数
